import Editor from "../../components/editor/Editor";
import EditorWrapper from "../../components/editorWrapper/EditorWrapper";
import HomeLink from "../../components/HomeLink";
import License from "../../components/License";
import TS from "../../components/TSNoteWrapper";
import MCQ from "../../components/mcq/MCQ"
import Markdown from "../../components/mcq/markdown"


# Variables in TypeScript and JavaScript

## Values

A `value` is a piece of information stored in your
computer. Maybe the information is the string of words `"I'm a word value!"`, or maybe it is just the integer number 2.
There are different _types_ of values like words or integers, we discuss this in the next section.

<Editor
  id="adfsdh"
  modelsInfo={[
    {
      filename: "values.js",
      value:
        'console.log("I\'m a word value")\r\nconsole.log(2) // ðŸ‘ˆ That is a number value',
      language: "javascript",
    },
  ]}
/>

## Declaring Variables

Variables let you store a value and reuse it in different parts of your code.
The two good ways to _declare_ a variable are with `let` and `const`.

[Tell me what the difference between these are, or only introduce let and not const.]


<Editor
  id="4"
  modelsInfo={[
    {
      filename: "makeVars.js",
      value:
        'let var1 = "from let"\r\nconst var2 = "from const"\r\n//variables are stored in the variable names\r\nconsole.log(var1)\r\n//variables help you use the same value multiple times\r\nconsole.log(var2)\r\nconsole.log(var2)',
      language: "javascript",
    },
  ]}
/>

You cannot declare a variable twice, run the code to see <code style={{backgroundColor: "#290000", color: "#FF8080", borderTop: "1px solid #5B0000", borderBottom: "1px solid #5B0000"}}>
SyntaxError: Identifier 'var1' has already been declared</code>

<Editor
  id="-3"
  modelsInfo={[
    {
      filename: "noDoubleDeclare.js",
      value: 'let var1 = "declare once"\r\nlet var1 = "declare twice"',
      language: "javascript",
    },
  ]}
/>

TypeScript tells you that the code will not work **BEFORE** you run the code. Notice that the file is a TypeScript file, [it is not a .ts, though I believe you have mentioned this in your emails]
pay attention to this when using this website! We've added a blue border to make this more noticeable.
Hover your cursor over `var1` to see the error message.

<TS>


<Editor
  id="-4"
  modelsInfo={[
    {
      filename: "noDoubleDeclare.ts",
      value: 'let var1 = "declare once"\r\nlet var1 = "declare twice"',
      language: "typescript",
    },
  ]}
/>

</TS>


You should see something like this:

<img
  style={{ margin: "0 auto" }}
  className="self-center flex-1 mt-0 mb-0"
  src="/JSTSbook/VarsAndStrings/TS-redeclare-error.png"
  alt="ts error"
/>

[The "Cannot redeclare..." phrase occurs twice. If you are going to provide sample output I would recommend it being identical to the IntelliSense output initially, and then maybe point out which bits matter for what you are discussing.]

[Ah, I now see that your sample output is the exact same if you hover over the second var1. If you hover over the first var1 then you get a double error message. There is also some bit about noDoubleDeclare.ts so maybe either explain that, state that it should be ignored, or reiterate what you care about (ie. your current sample output)]

[Also, when I run this block of code, I get the "noDoubleDeclare.ts: Cannot..." error rather than the just "Cannot..." error.]

[Does the sharedDeclarations.ts reset between browser windows on an account? Idk it just seems bizarre. Can I pass variables between editor windows?] [Perhaps this would be a good point to discuss how tabs work in your editor.]

If you run the code you get the same error, but phrased differently than before, <code style={{backgroundColor: "#290000", color: "#FF8080", borderTop: "1px solid #5B0000", borderBottom: "1px solid #5B0000"}}>
Cannot redeclare block-scoped variable 'var1'.</code>

On this site the TypeScript editors all share variable names when checking for duplicate declarations.

<TS>
  <Editor
    id="19"
    modelsInfo={[
      {
        filename: "sharedDeclarations.ts",
        value: 'let var1 = "The file above me causes the error."',
        language: "typescript",
      },
    ]}
  />
</TS>

## Assigning Variables

After you declare a variable using `let` you can **assign** the variable by setting it equal to another value WITHOUT saying **let** again.

<Editor
  id="-2"
  modelsInfo={[
    {
      filename: "reassign.js",
      value:
        'let var1 = "Use let to declare var1"\r\nvar1 = "no let the second time you use the variable!"\r\nconsole.log(var1)',
      language: "javascript",
    },
  ]}
/>

[In all the error-prone tabs you should have console.log() statements as if they were going to work.]

### let vs. const

[Ah I see, if you are going to explain the difference here but introduce let and const way at the beginning, you should mention that you will be explaining the difference later.]

Sometimes things shouldn't change, you can enforce and communicate this by using `const`.

<Editor
  id="5"
  modelsInfo={[
    {
      filename: "goodConst.js",
      value:
        'let age = "10" //age can change\r\nconst birthday = "April 1" //birthday can\'t change',
      language: "javascript",
    },
  ]}
/>

The difference between `let` and `const` is that you can reassign `let` but not `const`. Run the code below to see <code style={{backgroundColor: "#290000", color: "#FF8080", borderTop: "1px solid #5B0000", borderBottom: "1px solid #5B0000"}}>
TypeError: Assignment to constant variable.</code> Notice that `fromLet` gets printed before the error because the error happens after the `console.log`.

<Editor
  id="6"
  modelsInfo={[
    {
      filename: "cantReassignConst.js",
      value:
        'let fromLet = "from let"\r\nconst fromConst = "from const"\r\nfromLet = "Since I am a let variable, I was reassigned!"\r\nconsole.log(fromLet)\r\nfromConst = "Can't reassign me! This will cause an error"',
      language: "javascript",
    },
  ]}
/>

[I would request that when you hit the reset button on the editor (the clock thing in the middle) that the error underneath disappear. It currently stays even if you reset the editor.]


TypeScript again shows us the error on the screen without us running the code. Hover your cursor over the error for more information.
Run the code to see an error, but this time the `console.log` in line 4 doesn't run. This is because TypeScript checks for
any red squiggly lines (syntax errors) before it runs your code. [nice]

<TS>
  <Editor
    id="7"
    modelsInfo={[
      {
        filename: "cantReassignConst.ts",
        value:
          'let fromLet = "from let"\r\nconst fromConst = "from const"\r\nfromLet = "reassign let"\r\nconsole.log(fromLet)\r\nfromConst = "this will cause an error"',
        language: "typescript",
      },
    ]}
  />
</TS>

### Assignment and Basic Types

JavaScript lets you declare a variable as a word and then change its type to a number if you reassign it as a number.

<Editor
  id="10"
  modelsInfo={[
    {
      filename: "wordToNum.js",
      value:
        'let word = "word"\r\nword = 2+2 // word -> number\r\nconsole.log(word) //Sweet, JavaScript is a calculator!',
      language: "javascript",
    },
  ]}
/>

When I hover over `word` in `console.log(word)` it tells me that the word is a _string_ of letters (A.K.A. words).

<img
  style={{ margin: "0 auto" }}
  className="self-center flex-1 mt-0 mb-0"
  src="/JSTSbook/Variables/badJsHoverInfo.png"
  alt="ts error"
/>

It would be nice if the hover information told me that `word` was a _number_ at the time that it is printed, but it only
tells me that when it was declared it was a string. This could confuse a coworker who thinks your `word` variable is a string and gets an error
when they try to use it as a word, eg. if they were to try and find out how many characters are in the variable word.

<Editor
  id="11"
  modelsInfo={[
    {
      filename: "countChars.js",
      value:
        'let word = "word"\r\nconsole.log(word.length) // 4 characters\r\nword = 2+2\r\nconsole.log(word.length) //undefined',
      language: "javascript",
    },
  ]}
/>

To prevent your coworker from getting a mysterious `undefined` length of his word, TypeScript prevents you from reassigning `word` to a
_number_ because it was initially a _string_.

<TS>
  <Editor
    id="15"
    modelsInfo={[
      {
        filename: "wordToNum.ts",
        value: 'let word = "word"\r\nword = 2+2 // word -> number',
        language: "typescript",
      },
    ]}
  />
</TS>

This can be annoying. This annoyance is useful because it prevents you from breaking the hover information.
Otherwise you might hover over something and assume it is a string when it is
not. There are ways of reassigning variables to different types in TypeScript by slightly modifying the code, this is discussed
when we get deeper into TypeScript.

[Okay recognize, but it better be easy to change a number into a string. My bread and butter is creating filenames that are:
for i in range(100):
  with open('filename_' + str(i) + '.txt', 'w') as f:
    f.write('I am a sample file')
kna'mean? I guess TS is for doing different things than python, sure sure.]

---

## Exercises
[Don't give me a blank editor, it is confusing where to click to begin]


<ol>
  <li>
    <div style={{marginBottom: "8px"}}>
    <Markdown content={"Declare a variable `a` of type *number* using `let`, also declare a variable `b` of type *string* using `const`"} />
    </div>
    <EditorWrapper
  id="20"
  modelsInfo={[
    { filename: "1.js", value: "", language: "javascript" },
    {
      notInitial: true,
      readOnly: true,
      tested: true,
      value:
        'import "1"\r\nconsole.log("test: a and b are both defined")\r\nif(typeof a === "undefined") {\r\n  throw "a is not defined"\r\n}\r\nif(typeof b === "undefined") {\r\n  throw "b is not defined"\r\n}\r\nconsole.log("test: a is a number, b is a string")\r\nif(typeof a !== "number") {\r\n  throw "a is not of type number"\r\n}\r\nif(typeof b !== "string") {\r\n  throw "b is not of type string"\r\n}\r\nconsole.log("test: a declared with let, b declared with const")\r\ntry {\r\n  a = "hello"\r\n} catch (e) {\r\n  throw "a was declared using const"\r\n}\r\ntry {\r\n  b = 10\r\n  throw "b is not declared with const"\r\n} catch (e) {\r\n  if(e === "b is not declared with const") {\r\n    throw e\r\n  } \r\n}\r\n\r\nconsole.log("Problem solved")',
      filename: "test1.js",
      language: "javascript",
    },
  ]}
/>
  </li>
  <li>
    <MCQ info={{"promptText":"Which of the following variables should be declared using `const`?","solutionText":"The number of hairs on your head and your age will both change over time, they should be declared with `let`. Your birthday doesn't change, declare that using `const`.","answersText":["The number of hairs on your head","Your birthday","Your age"],"correctIndex":1}} />
  </li>
  <li>
    <MCQ info={{"promptText":"Which is a reason for TypeScript raising an error when you declare a variable as a *number* and then assign it to a *string*?","solutionText":"This is NOT an error in JavaScript. It does prevent misleading hover information, as discussed in this section.","answersText":["Because this is also an error in JavaScript","Because this prevents misleading hover information"],"correctIndex":1}} />
  </li>
</ol>

<hr />

[I think the logical progression of this chapter was great. It clearly broke down a key component of TypeScript. Maybe the value of this could be elaborated on, right now you have only mentioned that someone might try and find the number of characters in an integer, perhaps framing these within hypothetical examples of when this could go wrong would help drive the point home. I don't feel like any points were belabored in this chapter, it was clearly presented and I learned what I needed to.]


<License />
